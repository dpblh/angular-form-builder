(function(){angular.module("form",["builder.directive","builder.provider","builder.services","validator"])}).call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("builder.provider",["builder.services"]).provider("$builder",function(){var b,c,d,e;c=null,b=null,d=null,e=null,this.config={popoverPlacement:"right"},this.components={},this.groups=[],this.broadcastChannel={updateInput:"$updateInput"},this.forms={"default":[]},this.convertComponent=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;return c={name:a,group:null!=(d=b.group)?d:"Default",label:null!=(e=b.label)?e:"",description:null!=(h=b.description)?h:"",placeholder:null!=(i=b.placeholder)?i:"",editable:null!=(j=b.editable)?j:!0,required:null!=(k=b.required)?k:!1,show:null!=(l=b.show)?l:"true",validation:null!=(m=b.validation)?m:"/.*/",validationOptions:null!=(n=b.validationOptions)?n:[],someOptions:null!=(o=b.someOptions)?o:{},options:null!=(f=b.options)?f:[],arrayToText:null!=(g=b.arrayToText)?g:!1,template:b.template,templateUrl:b.templateUrl,popoverTemplate:b.popoverTemplate,popoverTemplateUrl:b.popoverTemplateUrl},c.template||c.templateUrl||console.error("The template is empty."),c.popoverTemplate||c.popoverTemplateUrl||console.error("The popoverTemplate is empty."),c},this.convertFormObject=function(a,b){var c,d,f,g,h,i,j,k,l,m,n,o;if(null==b&&(b={}),c=this.components[b.component],null==c)throw"The component "+b.component+" was not registered.";return d={id:b.id||e.guid(),component:b.component,editable:null!=(f=b.editable)?f:c.editable,index:null!=(g=b.index)?g:0,label:null!=(h=b.label)?h:c.label,description:null!=(i=b.description)?i:c.description,placeholder:null!=(j=b.placeholder)?j:c.placeholder,options:null!=(k=b.options)?k:c.options,someOptions:null!=(l=b.someOptions)?l:{},required:null!=(m=b.required)?m:c.required,show:null!=(n=b.show)?n:c.show,validation:null!=(o=b.validation)?o:c.validation}},this.reindexFormObject=function(a){return function(b){var c,d,e,f;for(c=a.forms[b],d=e=0,f=c.length;f>e;d=e+=1)c[d].index=d}}(this),this.setupProviders=function(){return function(a){return c=a,b=c.get("$http"),d=c.get("$templateCache"),e=c.get("utilsBuilder")}}(this),this.loadTemplate=function(a){return null==a.template&&b.get(a.templateUrl,{cache:d}).success(function(b){return a.template=b}),null==a.popoverTemplate?b.get(a.popoverTemplateUrl,{cache:d}).success(function(b){return a.popoverTemplate=b}):void 0},this.registerComponent=function(b){return function(d,e){var f,g;null==e&&(e={}),null==b.components[d]?(f=b.convertComponent(d,e),b.components[d]=f,null!=c&&b.loadTemplate(f),g=f.group,a.call(b.groups,g)<0&&b.groups.push(f.group)):console.error("The component "+d+" was registered.")}}(this),this.addFormObject=function(a){return function(b,c){var d;return null==c&&(c={}),null==(d=a.forms)[b]&&(d[b]=[]),a.insertFormObject(b,a.forms[b].length,c)}}(this),this.addAllFormObject=function(a){return function(b,c){return null==c&&(c=[]),a.forms[b]=c}}(this),this.insertFormObject=function(a){return function(b,c,d){var e;return null==d&&(d={}),null==(e=a.forms)[b]&&(e[b]=[]),c>a.forms[b].length?c=a.forms[b].length:0>c&&(c=0),a.forms[b].splice(c,0,a.convertFormObject(b,d)),a.reindexFormObject(b),a.forms[b][c]}}(this),this.removeFormObject=function(a){return function(b,c){var d;return d=a.forms[b],d.splice(c,1),a.reindexFormObject(b)}}(this),this.updateFormObjectIndex=function(a){return function(b,c,d){var e,f;if(c!==d)return f=a.forms[b],e=f.splice(c,1)[0],f.splice(d,0,e),a.reindexFormObject(b)}}(this),this.$get=["$injector",function(a){return function(b){var c,d,e;a.setupProviders(b),e=a.components;for(d in e)c=e[d],a.loadTemplate(c);return{config:a.config,components:a.components,groups:a.groups,forms:a.forms,broadcastChannel:a.broadcastChannel,registerComponent:a.registerComponent,addFormObject:a.addFormObject,addAllFormObject:a.addAllFormObject,insertFormObject:a.insertFormObject,removeFormObject:a.removeFormObject,updateFormObjectIndex:a.updateFormObjectIndex}}}(this)]})}.call(this),function(){angular.module("builder.services",[]).factory("utilsBuilder",[function(){return{guid:function(){var a;return a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},copyObjectToScope:function(a,b){var c,d;for(c in a)d=a[c],"$$hashKey"!==c&&(b[c]=d)}}}])}.call(this),function(){angular.module("form").directive("fbFormObject",["$injector",function(a){var b,c,d,e;return b=a.get("$builder"),c=a.get("$compile"),d=a.get("$parse"),e=a.get("$timeout"),{restrict:"A",controller:"fbFormObjectController",link:function(a,f,g){var h;return a.formObject=d(g.fbFormObject)(a),a.$component=b.components[a.formObject.component],a.$on(b.broadcastChannel.updateInput,function(){return a.updateInput(a.inputText)}),a.$component.arrayToText&&(a.inputArray=[],a.$watch("inputArray",function(b,c){var d,e,f;if(b!==c){d=[];for(e in a.inputArray)a.inputArray[e]&&d.push(null!=(f=a.options[e])?f:a.inputArray[e]);return a.inputText=d}},!0)),h=!0,a.$watch("inputText",function(){return h===!0?h=!1:a.updateInput(a.inputText)}),a.$watch("modelName",function(b,c){var d;if(c)return e.cancel(d),d=e(function(){var b,d,e,f,g,h,i,j,k,l,m;for(f=[],b=a.$parent.output,l=c.split("."),e=h=0,j=l.length;j>h;e=++h)g=l[e],f.push({parent:b,name:g}),b=b[g];for(f=f.reverse(),d=f.shift(),d.parent[d.name]=void 0,m=[],i=0,k=f.length;k>i;i++)g=f[i],m.push(angular.equals({},g.parent[g.name])?delete g.parent[g.name]:void 0);return m},1e3)}),a.$watch(g.fbFormObject,function(){return a.copyObjectToScope(a.formObject)},!0),a.$watch("$component.template",function(b){var d;if(b)return d=f.find("[ng-model='inputText']"),d.attr({validator:"{{validation}}"}),f.html(b),c(f.contents())(a)}),!a.$component.arrayToText&&a.formObject.options.length>0&&(a.inputText=a.formObject.options[0]),a.$watch("output."+a.formObject.modelName,function(b){return a.$component.arrayToText?a.inputArray=b:a.inputText=b})}}}]).controller("fbFormObjectController",["$scope","$injector",function(a,b){var c,d;return c=b.get("$builder"),d=b.get("utilsBuilder"),a.copyObjectToScope=function(b){return d.copyObjectToScope(b,a)},a.updateInput=function(b){var c;return c=function(c,d){var e,f,g,h;for(e=a.$parent.output,f=g=0,h=c.length;h>g;f=++g)b=c[f],c.length>f+1&&(e[b]||(e[b]={}),e=e[b]);return e[c[c.length-1]]=d},a.formObject.modelName?c(a.formObject.modelName.split("."),b):void 0}}])}.call(this),function(){angular.module("form").directive("fbForm",["$injector",function(a){return{restrict:"A",require:"ngModel",scope:{formName:"@fbForm",output:"=ngModel",input:"=fbDefault"},template:'<div class=\'fb-form-object\' ng-repeat="object in form" fb-form-object="object"></div>',controller:"fbFormController",link:function(b){var c,d,e;return c=a.get("$builder"),null==(d=c.forms)[e=b.formName]&&(d[e]=[]),b.form=c.forms[b.formName]}}}]).controller("fbFormController",["$scope","$injector",function(a,b){var c,d;return c=b.get("$builder"),d=b.get("$timeout"),null==a.output&&(a.output={}),a.$watch("form",function(){return d(function(){return a.$broadcast(c.broadcastChannel.updateInput)})},!0)}])}.call(this),function(){angular.module("form").directive("fbLayout",["$builder",function(a){return{restrict:"A",scope:{layout:"=fbLayout",output:"=fbOutput",input:"=fbInput"},template:'<div class="container-fluid">\n    <div class=\'row\' ng-repeat="row in layout.rows">\n        <legend ng-if="row.label" ng-bind="row.label"></legend>\n        <div class="col-md-{{column.width}}" ng-repeat="column in row.columns">\n            <div ng-model="output" fb-form="{{$parent.$index + \'\' + $index}}" fb-default="input"></div>\n        </div>\n    </div>\n</div>\n',link:function(b){var c;return b.defaultValue={},null==b.output&&(b.output={}),c=function(){var c,d,e,f,g,h,i,j;if(b.layout&&b.layout.rows){for(i=b.layout.rows,j=[],d=g=0,h=i.length;h>g;d=++g)f=i[d],j.push(function(){var b,g,h,i;for(h=f.columns,i=[],e=b=0,g=h.length;g>b;e=++b)c=h[e],i.push(a.addAllFormObject(""+d+e,c.formData.views));return i}());return j}},b.$watch("layout",function(){return c()}),c()}}}])}.call(this),function(){"use strict";angular.module("builder.directive",[]).directive("builderShow",["$parse",function(a){return{restrict:"A",multiElement:!0,scope:{builderShow:"="},link:function(b,c){return b.$watch("builderShow",function(d){var e;return b.model=b.$parent.$parent.output,e=a(d),b.$watch(function(){return e(b)},function(a){return a?c.removeClass("ng-hide"):c.addClass("ng-hide")})})}}}])}.call(this);