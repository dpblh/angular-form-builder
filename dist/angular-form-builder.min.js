(function(){angular.module("builder",["form","builder.provider","builder.services","builder.drag","validator"])}).call(this),function(){angular.module("form",["builder.directive","builder.provider","builder.services","validator"])}.call(this),function(){angular.module("builder").directive("fbBuilder",["$injector",function(a){var b,c;return b=a.get("$builder"),c=a.get("$drag"),{restrict:"A",scope:{fbBuilder:"=",formName:"@"},template:"<div class='form-horizontal'>\n    <div class='fb-form-object-editable' ng-repeat=\"object in formObjects\"\n        fb-form-object-editable=\"object\"></div>\n</div>",link:function(a,d){var e,f,g;return null==(f=b.forms)[g=a.formName]&&(f[g]=[]),a.formObjects=b.forms[a.formName],e=!0,$(d).addClass("fb-builder"),c.droppable($(d),{move:function(a){var b,c,f,g,h,i,j,k,l,m,n;if(e&&($("div.fb-form-object-editable").popover("hide"),e=!1),f=$(d).find(".fb-form-object-editable:not(.empty,.dragging)"),0===f.length)return void(0===$(d).find(".fb-form-object-editable.empty").length&&$(d).find(">div:first").append($("<div class='fb-form-object-editable empty'></div>")));for(j=[],j.push(-1e3),h=k=0,m=f.length;m>k;h=k+=1)c=$(f[h]),i=c.offset(),g=c.height(),j.push(i.top+g/2);for(j.push(j[j.length-1]+1e3),h=l=1,n=j.length;n>l;h=l+=1)if(a.pageY>j[h-1]&&a.pageY<=j[h]){$(d).find(".empty").remove(),b=$("<div class='fb-form-object-editable empty'></div>"),h-1<f.length?b.insertBefore($(f[h-1])):b.insertAfter($(f[h-2]));break}},out:function(){return e&&($("div.fb-form-object-editable").popover("hide"),e=!1),$(d).find(".empty").remove()},up:function(f,g,h){var i,j,k;return e=!0,c.isMouseMoved()?(g||"drag"!==h.mode?g&&("mirror"===h.mode&&b.insertFormObject(a.formName,$(d).find(".empty").index(),{component:h.object.componentName}),"drag"===h.mode&&(k=h.object.formObject.index,j=$(d).find(".empty").index(),j>k&&j--,b.updateFormObjectIndex(a.formName,k,j))):(i=h.object.formObject,i.editable&&b.removeFormObject(a.formName,i.index)),$(d).find(".empty").remove()):void $(d).find(".empty").remove()}})}}}])}.call(this),function(){angular.module("builder").directive("fbComponent",["$injector",function(a){var b,c,d;return b=a.get("$builder"),d=a.get("$drag"),c=a.get("$compile"),{restrict:"A",scope:{component:"=fbComponent"},controller:"fbComponentController",link:function(a,b){return a.copyObjectToScope(a.component),d.draggable($(b),{mode:"mirror",defer:!1,object:{componentName:a.component.name}}),a.$watch("component.template",function(d){var e;if(d)return e=c(d)(a),$(b).html(e)})}}}]).controller("fbComponentController",["$scope","utilsBuilder",function(a,b){return a.copyObjectToScope=function(c){return b.copyObjectToScope(c,a)}}])}.call(this),function(){angular.module("builder").directive("fbComponents",function(){return{restrict:"A",template:'<ul ng-if="groups.length > 1" class="nav nav-tabs nav-justified">\n    <li ng-repeat="group in groups" ng-class="{active:activeGroup==group}">\n        <a href=\'#\' ng-click="selectGroup($event, group)">{{group}}</a>\n    </li>\n</ul>\n<div class=\'form-horizontal\'>\n    <div class=\'fb-component\' ng-repeat="component in components"\n        fb-component="component"></div>\n</div>',controller:"fbComponentsController"}}).controller("fbComponentsController",["$scope","$injector",function(a,b){var c;return c=b.get("$builder"),a.selectGroup=function(b,d){var e,f,g,h;null!=b&&b.preventDefault(),a.activeGroup=d,a.components=[],g=c.components,h=[];for(f in g)e=g[f],e.group===d&&h.push(a.components.push(e));return h},a.groups=c.groups,a.activeGroup=a.groups[0],a.allComponents=c.components,a.$watch("allComponents",function(){return a.selectGroup(null,a.activeGroup)})}])}.call(this),function(){angular.module("builder.drag",[]).provider("$drag",function(){var a,b,c;a=null,b=null,this.data={draggables:{},droppables:{}},this.mouseMoved=!1,this.isMouseMoved=function(a){return function(){return a.mouseMoved}}(this),this.hooks={down:{},move:{},up:{}},this.eventMouseMove=function(){},this.eventMouseUp=function(){},$(function(a){return function(){return $(document).on("mousedown",function(b){var c,d,e;a.mouseMoved=!1,e=a.hooks.down;for(d in e)(c=e[d])(b)}),$(document).on("mousemove",function(b){var c,d,e;a.mouseMoved=!0,e=a.hooks.move;for(d in e)(c=e[d])(b)}),$(document).on("mouseup",function(b){var c,d,e;e=a.hooks.up;for(d in e)(c=e[d])(b)})}}(this)),this.currentId=0,this.getNewId=function(a){return function(){return""+a.currentId++}}(this),this.setupEasing=function(){return jQuery.extend(jQuery.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}})},this.setupProviders=function(c){return a=c,b=a.get("$rootScope")},this.isHover=function(){return function(a,b){var c,d,e,f,g;return d=a.offset(),e=b.offset(),f={width:a.width(),height:a.height()},g={width:b.width(),height:b.height()},c={x:!1,y:!1},c.x=d.left>e.left&&d.left<e.left+g.width,c.x=c.x||d.left+f.width>e.left&&d.left+f.width<e.left+g.width,c?(c.y=d.top>e.top&&d.top<e.top+g.height,c.y=c.y||d.top+f.height>e.top&&d.top+f.height<e.top+g.height,c.x&&c.y):!1}}(this),c=function(a,b){return setTimeout(function(){return b()},a)},this.autoScroll={up:!1,down:!1,scrolling:!1,scroll:function(a){return function(){return a.autoScroll.scrolling=!0,a.autoScroll.up?($("html, body").dequeue().animate({scrollTop:$(window).scrollTop()-50},100,"easeOutQuad"),c(100,function(){return a.autoScroll.scroll()})):a.autoScroll.down?($("html, body").dequeue().animate({scrollTop:$(window).scrollTop()+50},100,"easeOutQuad"),c(100,function(){return a.autoScroll.scroll()})):a.autoScroll.scrolling=!1}}(this),start:function(a){return function(b){if(b.clientY<50){if(a.autoScroll.up=!0,a.autoScroll.down=!1,!a.autoScroll.scrolling)return a.autoScroll.scroll()}else{if(!(b.clientY>$(window).innerHeight()-50))return a.autoScroll.up=!1,a.autoScroll.down=!1;if(a.autoScroll.up=!1,a.autoScroll.down=!0,!a.autoScroll.scrolling)return a.autoScroll.scroll()}}}(this),stop:function(a){return function(){return a.autoScroll.up=!1,a.autoScroll.down=!1}}(this)},this.dragMirrorMode=function(a){return function(b,c,d){var e;return null==c&&(c=!0),e={id:a.getNewId(),mode:"mirror",maternal:b[0],element:null,object:d},b.on("mousedown",function(d){var f;return d.preventDefault(),f=b.clone(),e.element=f[0],f.addClass("fb-draggable form-horizontal prepare-dragging"),a.hooks.move.drag=function(c,d){var g,h,i,j;if(!f.hasClass("prepare-dragging")||(f.css({width:b.width(),height:b.height()}),f.removeClass("prepare-dragging"),f.addClass("dragging"),!d)){f.offset({left:c.pageX-f.width()/2,top:c.pageY-f.height()/2}),a.autoScroll.start(c),i=a.data.droppables,j=[];for(h in i)g=i[h],j.push(a.isHover(f,$(g.element))?g.move(c,e):g.out(c,e));return j}},a.hooks.up.drag=function(b){var c,d,g,h;h=a.data.droppables;for(d in h)c=h[d],g=a.isHover(f,$(c.element)),c.up(b,g,e);return delete a.hooks.move.drag,delete a.hooks.up.drag,e.element=null,f.remove(),a.autoScroll.stop()},$("body").append(f),c?void 0:a.hooks.move.drag(d,c)}),e}}(this),this.dragDragMode=function(a){return function(b,c,d){var e;return null==c&&(c=!0),e={id:a.getNewId(),mode:"drag",maternal:null,element:b[0],object:d},b.addClass("fb-draggable"),b.on("mousedown",function(d){return d.preventDefault(),b.hasClass("dragging")?void 0:(b.addClass("prepare-dragging"),a.hooks.move.drag=function(c,d){var f,g,h;if(!b.hasClass("prepare-dragging")||(b.css({width:b.width(),height:b.height()}),b.removeClass("prepare-dragging"),b.addClass("dragging"),!d)){b.offset({left:c.pageX-b.width()/2,top:c.pageY-b.height()/2}),a.autoScroll.start(c),h=a.data.droppables;for(g in h)f=h[g],a.isHover(b,$(f.element))?f.move(c,e):f.out(c,e)}},a.hooks.up.drag=function(c){var d,f,g,h;h=a.data.droppables;for(f in h)d=h[f],d.element.contains(c.target)&&(g=a.isHover(b,$(d.element)),d.up(c,g,e));return delete a.hooks.move.drag,delete a.hooks.up.drag,b.css({width:"",height:"",left:"",top:""}),b.removeClass("dragging defer-dragging"),a.autoScroll.stop()},c?void 0:a.hooks.move.drag(d,c))}),e}}(this),this.dropMode=function(a){return function(c,d){var e;return e={id:a.getNewId(),element:c[0],move:function(a,c){return b.$apply(function(){return"function"==typeof d.move?d.move(a,c):void 0})},up:function(a,c,e){return b.$apply(function(){return"function"==typeof d.up?d.up(a,c,e):void 0})},out:function(a,c){return b.$apply(function(){return"function"==typeof d.out?d.out(a,c):void 0})}}}}(this),this.draggable=function(a){return function(b,c){var d,e,f,g,h,i,j;if(null==c&&(c={}),f=[],"mirror"===c.mode)for(g=0,i=b.length;i>g;g++)e=b[g],d=a.dragMirrorMode($(e),c.defer,c.object),f.push(d.id),a.data.draggables[d.id]=d;else for(h=0,j=b.length;j>h;h++)e=b[h],d=a.dragDragMode($(e),c.defer,c.object),f.push(d.id),a.data.draggables[d.id]=d;return f}}(this),this.droppable=function(a){return function(b,c){var d,e,f,g,h;for(null==c&&(c={}),f=[],g=0,h=b.length;h>g;g++)e=b[g],d=a.dropMode($(e),c),f.push(d),a.data.droppables[d.id]=d;return f}}(this),this.get=function(a){return this.setupEasing(),this.setupProviders(a),{isMouseMoved:this.isMouseMoved,data:this.data,draggable:this.draggable,droppable:this.droppable}},this.get.$inject=["$injector"],this.$get=this.get})}.call(this),function(){angular.module("builder").directive("fbFormObjectEditable",["$injector",function(a){var b,c,d,e;return b=a.get("$builder"),d=a.get("$drag"),c=a.get("$compile"),e=a.get("$validator"),{restrict:"A",controller:"fbFormObjectEditableController",scope:{formObject:"=fbFormObjectEditable"},link:function(a,f){var g;return a.formName=a.$parent.formName,a.inputArray=[],a.$component=b.components[a.formObject.component],a.setupScope(a.formObject),a.$watch("$component.template",function(b){var d;if(b)return d=c(b)(a),$(f).html(d)}),$(f).on("click",function(){return!1}),d.draggable($(f),{object:{formObject:a.formObject}}),a.formObject.editable?(g={},a.$watch("$component.popoverTemplate",function(d){return d?($(f).removeClass(g.id),g={id:"fb-"+Math.random().toString().substr(2),isClickedSave:!1,view:null,html:d},g.html=$(g.html).addClass(g.id),g.view=c(g.html)(a),$(f).addClass(g.id),$(f).popover({html:!0,title:a.$component.label,content:g.view,container:"body",placement:b.config.popoverPlacement})):void 0}),a.popover={save:function(b){b.preventDefault(),e.validate(a).success(function(){return g.isClickedSave=!0,$(f).popover("hide")})},remove:function(c){c.preventDefault(),b.removeFormObject(a.$parent.formName,a.$parent.$index),$(f).popover("hide")},shown:function(){return a.data.backup(),g.isClickedSave=!1},cancel:function(b){a.data.rollback(),b&&(b.preventDefault(),$(f).popover("hide"))}},$(f).on("show.bs.popover",function(){var a,b,c;return d.isMouseMoved()?!1:($("div.fb-form-object-editable:not(."+g.id+")").popover("hide"),a=$("form."+g.id).closest(".popover"),a.length>0?(b=$(f).offset().top+$(f).height()/2,c=b-a.height()/2,a.css({position:"absolute",top:c}),a.show(),setTimeout(function(){return a.addClass("in"),$(f).triggerHandler("shown.bs.popover")},0),!1):void 0)}),$(f).on("shown.bs.popover",function(){$(".popover ."+g.id+" input:first").select(),a.$apply(function(){return a.popover.shown()})}),$(f).on("hide.bs.popover",function(){var b;return b=$("form."+g.id).closest(".popover"),g.isClickedSave||(a.$$phase||a.$root.$$phase?a.popover.cancel():a.$apply(function(){return a.popover.cancel()})),b.removeClass("in"),setTimeout(function(){return b.hide()},300),!1})):void 0}}}]).controller("fbFormObjectEditableController",["$scope","$injector",function(a,b){var c,d;return c=b.get("$builder"),d=b.get("utilsBuilder"),a.setupScope=function(b){var e;return d.copyObjectToScope(b,a),a.optionsText=b.options.join("\n"),a.$watch("[modelName, label, description, placeholder, show, required, options, validation, someOptions]",function(){return b.modelName=a.modelName,b.label=a.label,b.description=a.description,b.placeholder=a.placeholder,b.required=a.required,b.show=a.show,b.options=a.options,b.validation=a.validation,b.someOptions=a.someOptions},!0),a.$watch("optionsText",function(b){var c;return a.options=function(){var a,d,e,f;for(e=b.split("\n"),f=[],a=0,d=e.length;d>a;a++)c=e[a],c.length>0&&f.push(c);return f}(),a.inputText=a.options[0]}),e=c.components[b.component],a.validationOptions=e.validationOptions},a.data={model:null,backup:function(){return this.model={modelName:a.modelName,label:a.label,description:a.description,placeholder:a.placeholder,required:a.required,show:a.show,optionsText:a.optionsText,validation:a.validation,someOptions:angular.copy(a.someOptions)}},rollback:function(){return this.model?(a.modelName=this.model.modelName,a.label=this.model.label,a.description=this.model.description,a.placeholder=this.model.placeholder,a.required=this.model.required,a.show=this.model.show,a.optionsText=this.model.optionsText,a.validation=this.model.validation,a.someOptions=this.model.someOptions):void 0}}}])}.call(this),function(){angular.module("builder").directive("fbLayoutBuilder",["$builder","$compile","utilsBuilder",function(a,b,c){var d;return d={restrict:"A",scope:{layout:"=fbLayoutBuilder"},template:'<div class="panel panel-default" style=\'position: relative;\'>\n    <div class="panel-heading">\n        <h3 class="panel-title">Builder</h3>\n    </div>\n    <div class="container-fluid">\n        <div class="row" ng-repeat="row in layout.rows">\n            <legend ng-if="row.label" ng-bind="row.label"></legend>\n            <div class="col-md-{{column.width}}" ng-repeat="column in row.columns">\n                <div fb-builder="column.formData.views" form-name="{{$parent.$index + \'\' + $index}}"></div>\n            </div>\n        </div>\n    </div>\n\n</div>\n',templatePopover:"<form role=\"form\" class='form-horizontal'>\n\n    <div ng-repeat='row in layout.rows'>\n        <div class=\"form-group\">\n            <label class='col-lg-4 control-label' ng-click=\"removeRow(row)\"><span style='color: red'>x</span> удалить строку</label>\n        </div>\n        <div class=\"form-group\">\n            <label class='col-lg-4 control-label'>Наименование строки</label>\n            <div class='col-lg-8'>\n                <input type='text' class='form-control col-lg-8' ng-model='row.label'/>\n            </div>\n\n        </div>\n        <div class=\"form-group\">\n\n                <div class='col-lg-3' ng-repeat='column in row.columns'>\n                    <input type='text' class='form-control' ng-model='column.width'/>\n                    <label class='col-lg-1 control-label' ng-click='removeColumn(row, column)'><span style='color: red'>x</span></label>\n                </div>\n\n                <label class='btn btn-default' ng-click='addColumn(row)'>+</label>\n        </div>\n    </div>\n\n    <label class='btn btn-default' ng-click='addRow()'>+</label>\n</form>",link:function(e,f){var g,h;return g=function(){var b,c,d,f,g,h,i,j;if(e.layout&&e.layout.rows){for(i=e.layout.rows,j=[],c=g=0,h=i.length;h>g;c=++g)f=i[c],j.push(function(){var e,g,h,i;for(h=f.columns,i=[],d=e=0,g=h.length;g>e;d=++e)b=h[d],i.push(a.addAllFormObject(""+c+d,b.formData.views));return i}());return j}},e.$watch("layout",function(){return g()}),g(),h=b(d.templatePopover)(e),$(f).popover({html:!0,title:"layout settings",content:h,container:"body",placement:"right"}),e.showSettings=!1,e.removeRow=function(a){return e.layout.rows.splice(e.layout.rows.indexOf(a),1)},e.removeColumn=function(a,b){return a.columns.splice(a.columns.indexOf(b),1)},e.addColumn=function(b){var d,f;return f=e.layout.rows.indexOf(b),d=b.columns.length,b.columns.push({width:12,formData:{inputs:[],name:"example",views:[{id:c.guid(),component:"textInput",editable:!0,index:2,label:"Text Input2",description:"description",placeholder:"placeholder",options:[],required:!1,validation:"/.*/"}]}}),a.addAllFormObject(""+f+d,e.layout.rows[f].columns[d].formData.views)},e.addRow=function(){var b;return b=e.layout.rows.length,e.layout.rows.push({columns:[{width:12,formData:{inputs:[],name:"example",views:[{id:c.guid(),component:"textInput",editable:!0,index:2,label:"Text Input2",description:"description",placeholder:"placeholder",options:[],required:!1,validation:"/.*/"}]}}]}),a.addAllFormObject(""+b+"0",e.layout.rows[b].columns[0].formData.views)}}}}])}.call(this),function(){angular.module("form").directive("fbFormObject",["$injector",function(a){var b,c,d,e;return b=a.get("$builder"),c=a.get("$compile"),d=a.get("$parse"),e=a.get("$timeout"),{restrict:"A",controller:"fbFormObjectController",link:function(a,f,g){var h;return a.formObject=d(g.fbFormObject)(a),a.$component=b.components[a.formObject.component],a.$on(b.broadcastChannel.updateInput,function(){return a.updateInput(a.inputText)}),a.$component.arrayToText&&(a.inputArray=[],a.$watch("inputArray",function(b,c){var d,e,f;if(b!==c){d=[];for(e in a.inputArray)a.inputArray[e]&&d.push(null!=(f=a.options[e])?f:a.inputArray[e]);return a.inputText=d}},!0)),h=!0,a.$watch("inputText",function(){return h===!0?h=!1:a.updateInput(a.inputText)}),a.$watch("modelName",function(b,c){var d;if(c)return e.cancel(d),d=e(function(){var b,d,e,f,g,h,i,j,k,l,m;for(f=[],b=a.$parent.output,l=c.split("."),e=h=0,j=l.length;j>h;e=++h)g=l[e],f.push({parent:b,name:g}),b=b[g];for(f=f.reverse(),d=f.shift(),d.parent[d.name]=void 0,m=[],i=0,k=f.length;k>i;i++)g=f[i],m.push(angular.equals({},g.parent[g.name])?delete g.parent[g.name]:void 0);return m},1e3)}),a.$watch(g.fbFormObject,function(){return a.copyObjectToScope(a.formObject)},!0),a.$watch("$component.template",function(b){var d;if(b)return d=f.find("[ng-model='inputText']"),d.attr({validator:"{{validation}}"}),f.html(b),c(f.contents())(a)}),!a.$component.arrayToText&&a.formObject.options.length>0&&(a.inputText=a.formObject.options[0]),a.$watch("output."+a.formObject.modelName,function(b){return a.$component.arrayToText?a.inputArray=b:a.inputText=b})}}}]).controller("fbFormObjectController",["$scope","$injector",function(a,b){var c,d;return c=b.get("$builder"),d=b.get("utilsBuilder"),a.copyObjectToScope=function(b){return d.copyObjectToScope(b,a)},a.updateInput=function(b){var c;return c=function(c,d){var e,f,g,h;for(e=a.$parent.output,f=g=0,h=c.length;h>g;f=++g)b=c[f],c.length>f+1&&(e[b]||(e[b]={}),e=e[b]);return e[c[c.length-1]]=d},a.formObject.modelName?c(a.formObject.modelName.split("."),b):void 0}}])}.call(this),function(){angular.module("form").directive("fbForm",["$injector",function(a){return{restrict:"A",require:"ngModel",scope:{formName:"@fbForm",output:"=ngModel",input:"=fbDefault"},template:'<div class=\'fb-form-object\' ng-repeat="object in form" fb-form-object="object"></div>',controller:"fbFormController",link:function(b){var c,d,e;return c=a.get("$builder"),null==(d=c.forms)[e=b.formName]&&(d[e]=[]),b.form=c.forms[b.formName]}}}]).controller("fbFormController",["$scope","$injector",function(a,b){var c,d;return c=b.get("$builder"),d=b.get("$timeout"),null==a.output&&(a.output={}),a.$watch("form",function(){return d(function(){return a.$broadcast(c.broadcastChannel.updateInput)})},!0)}])}.call(this),function(){angular.module("form").directive("fbLayout",["$builder",function(a){return{restrict:"A",scope:{layout:"=fbLayout",output:"=fbOutput",input:"=fbInput"},template:'<div class="container-fluid">\n    <div class=\'row\' ng-repeat="row in layout.rows">\n        <legend ng-if="row.label" ng-bind="row.label"></legend>\n        <div class="col-md-{{column.width}}" ng-repeat="column in row.columns">\n            <div ng-model="output" fb-form="{{$parent.$index + \'\' + $index}}" fb-default="input"></div>\n        </div>\n    </div>\n</div>\n',link:function(b){var c;return b.defaultValue={},null==b.output&&(b.output={}),c=function(){var c,d,e,f,g,h,i,j;if(b.layout&&b.layout.rows){for(i=b.layout.rows,j=[],d=g=0,h=i.length;h>g;d=++g)f=i[d],j.push(function(){var b,g,h,i;for(h=f.columns,i=[],e=b=0,g=h.length;g>b;e=++b)c=h[e],i.push(a.addAllFormObject(""+d+e,c.formData.views));return i}());return j}},b.$watch("layout",function(){return c()}),c()}}}])}.call(this),function(){"use strict";angular.module("builder.directive",[]).directive("builderShow",["$parse",function(a){return{restrict:"A",multiElement:!0,scope:{builderShow:"="},link:function(b,c){return b.$watch("builderShow",function(d){var e;return b.model=b.$parent.$parent.output,e=a(d),b.$watch(function(){return e(b)},function(a){return a?c.removeClass("ng-hide"):c.addClass("ng-hide")})})}}}])}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("builder.provider",["builder.services"]).provider("$builder",function(){var b,c,d,e;c=null,b=null,d=null,e=null,this.config={popoverPlacement:"right"},this.components={},this.groups=[],this.broadcastChannel={updateInput:"$updateInput"},this.forms={"default":[]},this.convertComponent=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;return c={name:a,group:null!=(d=b.group)?d:"Default",label:null!=(e=b.label)?e:"",description:null!=(h=b.description)?h:"",placeholder:null!=(i=b.placeholder)?i:"",editable:null!=(j=b.editable)?j:!0,required:null!=(k=b.required)?k:!1,show:null!=(l=b.show)?l:"true",validation:null!=(m=b.validation)?m:"/.*/",validationOptions:null!=(n=b.validationOptions)?n:[],someOptions:null!=(o=b.someOptions)?o:{},options:null!=(f=b.options)?f:[],arrayToText:null!=(g=b.arrayToText)?g:!1,template:b.template,templateUrl:b.templateUrl,popoverTemplate:b.popoverTemplate,popoverTemplateUrl:b.popoverTemplateUrl},c.template||c.templateUrl||console.error("The template is empty."),c.popoverTemplate||c.popoverTemplateUrl||console.error("The popoverTemplate is empty."),c},this.convertFormObject=function(a,b){var c,d,f,g,h,i,j,k,l,m,n,o;if(null==b&&(b={}),c=this.components[b.component],null==c)throw"The component "+b.component+" was not registered.";return d={id:b.id||e.guid(),component:b.component,editable:null!=(f=b.editable)?f:c.editable,index:null!=(g=b.index)?g:0,label:null!=(h=b.label)?h:c.label,description:null!=(i=b.description)?i:c.description,placeholder:null!=(j=b.placeholder)?j:c.placeholder,options:null!=(k=b.options)?k:c.options,someOptions:null!=(l=b.someOptions)?l:{},required:null!=(m=b.required)?m:c.required,show:null!=(n=b.show)?n:c.show,validation:null!=(o=b.validation)?o:c.validation}},this.reindexFormObject=function(a){return function(b){var c,d,e,f;for(c=a.forms[b],d=e=0,f=c.length;f>e;d=e+=1)c[d].index=d}}(this),this.setupProviders=function(){return function(a){return c=a,b=c.get("$http"),d=c.get("$templateCache"),e=c.get("utilsBuilder")}}(this),this.loadTemplate=function(a){return null==a.template&&b.get(a.templateUrl,{cache:d}).success(function(b){return a.template=b}),null==a.popoverTemplate?b.get(a.popoverTemplateUrl,{cache:d}).success(function(b){return a.popoverTemplate=b}):void 0},this.registerComponent=function(b){return function(d,e){var f,g;null==e&&(e={}),null==b.components[d]?(f=b.convertComponent(d,e),b.components[d]=f,null!=c&&b.loadTemplate(f),g=f.group,a.call(b.groups,g)<0&&b.groups.push(f.group)):console.error("The component "+d+" was registered.")}}(this),this.addFormObject=function(a){return function(b,c){var d;return null==c&&(c={}),null==(d=a.forms)[b]&&(d[b]=[]),a.insertFormObject(b,a.forms[b].length,c)}}(this),this.addAllFormObject=function(a){return function(b,c){return null==c&&(c=[]),a.forms[b]=c}}(this),this.insertFormObject=function(a){return function(b,c,d){var e;return null==d&&(d={}),null==(e=a.forms)[b]&&(e[b]=[]),c>a.forms[b].length?c=a.forms[b].length:0>c&&(c=0),a.forms[b].splice(c,0,a.convertFormObject(b,d)),a.reindexFormObject(b),a.forms[b][c]}}(this),this.removeFormObject=function(a){return function(b,c){var d;return d=a.forms[b],d.splice(c,1),a.reindexFormObject(b)}}(this),this.updateFormObjectIndex=function(a){return function(b,c,d){var e,f;if(c!==d)return f=a.forms[b],e=f.splice(c,1)[0],f.splice(d,0,e),a.reindexFormObject(b)}}(this),this.$get=["$injector",function(a){return function(b){var c,d,e;a.setupProviders(b),e=a.components;for(d in e)c=e[d],a.loadTemplate(c);return{config:a.config,components:a.components,groups:a.groups,forms:a.forms,broadcastChannel:a.broadcastChannel,registerComponent:a.registerComponent,addFormObject:a.addFormObject,addAllFormObject:a.addAllFormObject,insertFormObject:a.insertFormObject,removeFormObject:a.removeFormObject,updateFormObjectIndex:a.updateFormObjectIndex}}}(this)]})}.call(this),function(){angular.module("builder.services",[]).factory("utilsBuilder",[function(){return{guid:function(){var a;return a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},copyObjectToScope:function(a,b){var c,d;for(c in a)d=a[c],"$$hashKey"!==c&&(b[c]=d)}}}])}.call(this);